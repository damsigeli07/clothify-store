<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.cell.PropertyValueFactory?>

<AnchorPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="controller.ReportsController"
            style="-fx-background-color: #1A1D29;"
            prefHeight="700.0" prefWidth="1200.0">

    <children>
        <!-- Header -->
        <HBox alignment="CENTER_LEFT" prefHeight="60.0" spacing="20.0"
              style="-fx-background-color: #1E2230;"
              AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
            <padding>
                <Insets bottom="15.0" left="20.0" right="20.0" top="15.0"/>
            </padding>
            <children>
                <Button mnemonicParsing="false" onAction="#backToDashboard"
                        style="-fx-background-color: #5BA3F5; -fx-text-fill: white;"
                        text="â† Back">
                    <padding>
                        <Insets bottom="8.0" left="15.0" right="15.0" top="8.0"/>
                    </padding>
                </Button>
                <Label style="-fx-font-weight: bold; -fx-font-size: 20;" text="Reports" textFill="#5ba3f5"/>
            </children>
        </HBox>

        <!-- Main Content -->
        <VBox spacing="20.0" AnchorPane.leftAnchor="20.0" AnchorPane.rightAnchor="20.0"
              AnchorPane.topAnchor="80.0" AnchorPane.bottomAnchor="20.0">

            <!-- Summary Cards -->
            <HBox spacing="20.0">
                <children>
                    <VBox prefHeight="120.0" prefWidth="280.0" spacing="10.0" HBox.hgrow="ALWAYS"
                          style="-fx-background-color: #252936; -fx-background-radius: 10; -fx-padding: 20;">
                        <children>
                            <Label style="-fx-font-size: 14px;" text="Today's Sales" textFill="#9ca3af"/>
                            <Label fx:id="lblTodaySales" style="-fx-font-size: 28; -fx-font-weight: bold;"
                                   text="$0.00" textFill="#5ba3f5"/>
                            <Label fx:id="lblTodayOrders" style="-fx-font-size: 12px;"
                                   text="0 Orders" textFill="#34d399"/>
                        </children>
                    </VBox>
                    <VBox prefHeight="120.0" prefWidth="280.0" spacing="10.0" HBox.hgrow="ALWAYS"
                          style="-fx-background-color: #252936; -fx-background-radius: 10; -fx-padding: 20;">
                        <children>
                            <Label style="-fx-font-size: 14px;" text="Total Products" textFill="#9ca3af"/>
                            <Label fx:id="lblTotalProducts" style="-fx-font-size: 28; -fx-font-weight: bold;"
                                   text="0" textFill="#5ba3f5"/>
                            <Label style="-fx-font-size: 12px;" text="In Inventory" textFill="#9ca3af"/>
                        </children>
                    </VBox>
                    <VBox prefHeight="120.0" prefWidth="280.0" spacing="10.0" HBox.hgrow="ALWAYS"
                          style="-fx-background-color: #252936; -fx-background-radius: 10; -fx-padding: 20;">
                        <children>
                            <Label style="-fx-font-size: 14px;" text="Low Stock Items" textFill="#9ca3af"/>
                            <Label fx:id="lblLowStockCount" style="-fx-font-size: 28; -fx-font-weight: bold;"
                                   text="0" textFill="#f87171"/>
                            <Label style="-fx-font-size: 12px;" text="Need Restock" textFill="#f87171"/>
                        </children>
                    </VBox>
                    <VBox prefHeight="120.0" prefWidth="280.0" spacing="10.0" HBox.hgrow="ALWAYS"
                          style="-fx-background-color: #252936; -fx-background-radius: 10; -fx-padding: 20;">
                        <children>
                            <Label style="-fx-font-size: 14px;" text="Total Inventory Value" textFill="#9ca3af"/>
                            <Label fx:id="lblInventoryValue" style="-fx-font-size: 28; -fx-font-weight: bold;"
                                   text="$0.00" textFill="#5ba3f5"/>
                            <Label style="-fx-font-size: 12px;" text="Stock Value" textFill="#9ca3af"/>
                        </children>
                    </VBox>
                </children>
            </HBox>

            <!-- Report Tabs -->
            <TabPane tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS"
                     style="-fx-background-color: #252936;">

                <!-- Sales Report Tab -->
                <Tab text="Sales Report">
                    <VBox spacing="15.0" style="-fx-padding: 20;">
                        <children>
                            <HBox spacing="10.0" alignment="CENTER_LEFT">
                                <children>
                                    <Label text="Filter:" textFill="#9ca3af" style="-fx-font-size: 14px;"/>
                                    <ComboBox fx:id="cmbSalesFilter"
                                              style="-fx-background-color: #1E2230;"
                                              onAction="#loadSalesReport">
                                        <items>
                                            <javafx.collections.FXCollections fx:factory="observableArrayList">
                                                <String fx:value="Today"/>
                                                <String fx:value="All"/>
                                            </javafx.collections.FXCollections>
                                        </items>
                                    </ComboBox>
                                </children>
                            </HBox>

                            <TableView fx:id="tblSales" VBox.vgrow="ALWAYS"
                                       style="-fx-background-color: #1E2230; -fx-control-inner-background: #1E2230;">
                                <columns>
                                    <TableColumn text="Order ID" prefWidth="100">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="id"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                    <TableColumn text="Date/Time" prefWidth="200">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="orderDate"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                    <TableColumn text="Customer" prefWidth="200">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="customerName"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                    <TableColumn text="Amount" prefWidth="150">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="totalAmount"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                    <TableColumn text="Status" prefWidth="150">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="status"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                </columns>
                            </TableView>
                        </children>
                    </VBox>
                </Tab>

                <!-- Low Stock Report Tab -->
                <Tab text="Low Stock Report">
                    <VBox spacing="15.0" style="-fx-padding: 20;">
                        <children>
                            <HBox spacing="10.0" alignment="CENTER_LEFT">
                                <children>
                                    <Label text="Products with quantity less than 10"
                                           textFill="#f87171" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
                                    <Region HBox.hgrow="ALWAYS"/>
                                    <Button text="Refresh" onAction="#loadLowStockReport"
                                            style="-fx-background-color: #5BA3F5; -fx-text-fill: white;">
                                        <padding>
                                            <Insets bottom="8.0" left="15.0" right="15.0" top="8.0"/>
                                        </padding>
                                    </Button>
                                </children>
                            </HBox>

                            <TableView fx:id="tblLowStock" VBox.vgrow="ALWAYS"
                                       style="-fx-background-color: #1E2230; -fx-control-inner-background: #1E2230;">
                                <columns>
                                    <TableColumn text="ID" prefWidth="80">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="id"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                    <TableColumn text="Product Name" prefWidth="250">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="name"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                    <TableColumn text="Category" prefWidth="150">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="category"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                    <TableColumn text="Current Stock" prefWidth="150">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="quantity"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                    <TableColumn text="Price" prefWidth="120">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="price"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                    <TableColumn text="Supplier" prefWidth="200">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="supplier"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                </columns>
                            </TableView>
                        </children>
                    </VBox>
                </Tab>

                <!-- Inventory Summary Tab -->
                <Tab text="Inventory Summary">
                    <VBox spacing="15.0" style="-fx-padding: 20;">
                        <children>
                            <HBox spacing="10.0" alignment="CENTER_LEFT">
                                <children>
                                    <Label text="All Products in Inventory"
                                           textFill="#9ca3af" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
                                    <Region HBox.hgrow="ALWAYS"/>
                                    <Button text="Refresh" onAction="#loadInventorySummary"
                                            style="-fx-background-color: #5BA3F5; -fx-text-fill: white;">
                                        <padding>
                                            <Insets bottom="8.0" left="15.0" right="15.0" top="8.0"/>
                                        </padding>
                                    </Button>
                                </children>
                            </HBox>

                            <TableView fx:id="tblInventory" VBox.vgrow="ALWAYS"
                                       style="-fx-background-color: #1E2230; -fx-control-inner-background: #1E2230;">
                                <columns>
                                    <TableColumn text="ID" prefWidth="80">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="id"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                    <TableColumn text="Product Name" prefWidth="250">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="name"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                    <TableColumn text="Category" prefWidth="150">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="category"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                    <TableColumn text="Quantity" prefWidth="120">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="quantity"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                    <TableColumn text="Price" prefWidth="120">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="price"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                    <TableColumn text="Total Value" prefWidth="150">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="dummy"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                    <TableColumn text="Supplier" prefWidth="180">
                                        <cellValueFactory>
                                            <PropertyValueFactory property="supplier"/>
                                        </cellValueFactory>
                                    </TableColumn>
                                </columns>
                            </TableView>
                        </children>
                    </VBox>
                </Tab>
            </TabPane>
        </VBox>
    </children>

</AnchorPane>

